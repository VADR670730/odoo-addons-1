<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright 2020 RGB Consulting
     License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl). -->
<odoo>
    <template id="website_sale_options.products_add_to_cart" inherit_id="website_sale.products_add_to_cart">
        <xpath expr="//div[@class='product_price']/t[1]" position="attributes">
            <attribute name="t-if">True</attribute>
        </xpath>
        <xpath expr="//div[@class='product_price']/t[2]" position="attributes">
            <attribute name="t-if">None</attribute>
        </xpath>
    </template>

    <template id="website_sale_options_inherit" inherit_id="website_sale_options.modal">
        <xpath expr="//table/tbody/tr[@id='product_confirmation']" position="replace">
            <t t-set="option_inc" t-value="0"/>
            <tr id="product_confirmation" class="js_product">
                <td width="100">
                    <input type="hidden" class="product_id" t-attf-name="product-variant-#{option_inc}"
                           t-att-value="product.product_variant_id.id if len(product.product_variant_ids) == 1 else '0'"/>
                    <span t-field="product.image_medium" t-options='{"widget": "image" }'/>
                </td>
                <td>
                    <strong t-field="product.display_name"/>
                    <div class="text-muted">
                        <div t-field="product.description_sale"/>
                        <div class="js_attributes"/>
                    </div>
                </td>
                <td>
                    <div class="pull-left">
                        <t t-call="website_sale.variants"/>
                    </div>
                </td>
                <td>
                    <span class="oe_price">
                        <span class="text-danger oe_default_price oe_optional" t-field="product.lst_price"
                              t-options='{
                                "widget": "monetary",
                                "from_currency": product.currency_id,
                                "display_currency": website.currency_id
                              }'/>
                        <span class="oe_price" style="white-space: nowrap;" t-field="product.website_price"
                              t-options='{
                                "widget": "monetary",
                                "display_currency": website.currency_id
                              }'/>
                    </span>
                    <div class="css_not_available_msg bg-danger">
                        <span>Product not available</span>
                    </div>
                </td>
                <td>
                    <div class="input-group oe_website_spinner">
                        <a t-attf-href="#" class="mb8 input-group-addon js_add_cart_json">
                            <i class="fa fa-minus"></i>
                        </a>
                        <input type="text" class="js_quantity form-control quantity" data-min="1" name="add_qty"
                               value="1"/>
                        <a t-attf-href="#" class="mb8 input-group-addon float_left js_add_cart_json">
                            <i class="fa fa-plus"></i>
                        </a>
                    </div>
                </td>
                <t t-set="option_inc" t-value="option_inc+1"/>
            </tr>
        </xpath>
    </template>
</odoo>
